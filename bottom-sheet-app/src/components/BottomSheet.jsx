import {
  Box,
  Button,
  useMediaQuery,
  HStack,
  Icon,
  Image,
  Text,
} from "@chakra-ui/react";
import { useDispatch, useSelector } from "react-redux";
import { setCurrentSnapPoint } from "../redux/ProductReducer/action";
import { ChevronUpIcon } from "@chakra-ui/icons";
import { useState } from "react";
const BottomSheet = () => {
  const [scrollY] = useState(0);
  const dispatch = useDispatch();
  const [isDragEnabled, setIsDragEnabled] = useState(true);
  const [dragDirection, setDragDirection] = useState(""); 
  const { currentSnapPoint } = useSelector((state) => state.ProductReducer);
  const [isMobile] = useMediaQuery("(max-width: 768px)");
  const handleSnapPointChange = (snapPoint) => {
    dispatch(setCurrentSnapPoint(snapPoint));
  };
  const toggleDrag = () => {
    setIsDragEnabled(!isDragEnabled);
  };
  let dragStartY = 0;
  let dragEndY = 0;

  const handleDragStart = (e, direction) => {
    if (!isDragEnabled) {
      e.preventDefault();
      return;
    }
    dragStartY = e.clientY || e.touches[0].clientY;
    setDragDirection(direction); 
  };

  const handleDragEnd = (e) => {
    if (!isDragEnabled) {
      e.preventDefault();
      return;
    }
    dragEndY = e.clientY || e.changedTouches[0].clientY;
    const dragDistance = dragEndY - dragStartY;

    let newSnapPoint = currentSnapPoint - dragDistance;

    if (newSnapPoint < 100) {
      newSnapPoint = 100;
    } else if (newSnapPoint > 700) {
      newSnapPoint = 700;
    }

    if (dragDirection === "top" || dragDirection === "bottom"  ) {
      handleSnapPointChange(newSnapPoint);
    } else if (dragDirection === "middle") {
      const middleSnapPoint = 300;
      const topSnapPoint = 700; 
      const bottomSnapPoint = 100; 

      if (
        Math.abs(currentSnapPoint - topSnapPoint) <
        Math.abs(currentSnapPoint - bottomSnapPoint)
      ) {
        handleSnapPointChange(topSnapPoint);
      } else {
        handleSnapPointChange(bottomSnapPoint);
      }
    }
  };

  const handleArrowButtonClick = () => {
    dispatch(setCurrentSnapPoint(700));
  };
  return (
    <>
      <Box
        bg="rgba(15,23,42,0.7);"
        borderRadius={"80px"}
        w={"360px"}
        m="auto"
        mt={"20px"}
        position={"relative"}
      >
        <Image src="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 171 350'%3E%3Cg filter='url(%23filter0_d)'%3E%3Cpath fill='%23000' fill-opacity='.01' fill-rule='evenodd' d='M85.105 343c40.831 0 73.932-1.196 73.932-2.672 0-1.476-45.338-2.145-73.933-2.145-28.594 0-73.932.669-73.932 2.145S44.272 343 85.105 343z' clip-rule='evenodd'/%3E%3C/g%3E%3Cg filter='url(%23filter1_d)'%3E%3Cpath fill='%23000' fill-opacity='.01' fill-rule='evenodd' d='M85.084 342.335c39.471 0 71.468-.957 71.468-2.138 0-1.18-43.826-1.716-71.468-1.716-27.641 0-71.468.536-71.468 1.716 0 1.181 31.998 2.138 71.468 2.138z' clip-rule='evenodd'/%3E%3C/g%3E%3Cg filter='url(%23filter2_d)'%3E%3Cpath fill='%23000' fill-opacity='.01' fill-rule='evenodd' d='M85.203 341.142c36.748 0 66.539-.478 66.539-1.069 0-.59-40.804-.858-66.54-.858-25.734 0-66.538.268-66.538.858 0 .591 29.79 1.069 66.539 1.069z' clip-rule='evenodd'/%3E%3C/g%3E%3Cmask id='a' width='212' height='392' x='-21' y='-26' mask-type='alpha' maskUnits='userSpaceOnUse'%3E%3Cpath fill='%23C4C4C4' fill-rule='evenodd' d='M191-26H-21v392h212V-26zm-64.691 39.67v-.132c0-1.69 0-3.418 3.023-3.418h12.618c10.655 0 17.087 6.432 17.087 17.087V313.21c0 10.655-6.432 17.087-17.087 17.087H28.259c-10.655 0-17.087-6.432-17.087-17.087V27.207c0-10.655 6.432-17.087 17.087-17.087h12.749c3.023 0 3.023 1.728 3.023 3.418v.131c0 3.653 2.787 8.28 9.2 8.28h63.878c6.413 0 9.2-4.627 9.2-8.28z' clip-rule='evenodd'/%3E%3C/mask%3E%3Cg mask='url(%23a)'%3E%3Cg clip-path='url(%23clip0)'%3E%3Cpath fill='%23000' fill-rule='evenodd' d='M30.887 0h108.434c20.845 0 29.836 10.306 29.836 29.836v280.746c0 18.873-9.648 29.835-29.836 29.835H30.887c-20.844 0-29.835-10.305-29.835-29.835V29.836C1.052 10.306 10.042 0 30.887 0z' clip-rule='evenodd'/%3E%3Cg filter='url(%23filter3_i)' fill-rule='evenodd' clip-rule='evenodd'%3E%3Cpath fill='%23C9C6C8' d='M30.887.789C10.973.789 1.84 10.23 1.84 29.836v280.746c0 19.605 9.133 29.047 29.047 29.047h108.434c19.266 0 29.048-10.108 29.048-29.047V29.836c0-19.605-9.133-29.047-29.048-29.047H30.887z'/%3E%3Cpath fill='url(%23paint0_linear)' d='M30.887.789C10.973.789 1.84 10.23 1.84 29.836v280.746c0 19.605 9.133 29.047 29.047 29.047h108.434c19.266 0 29.048-10.108 29.048-29.047V29.836c0-19.605-9.133-29.047-29.048-29.047H30.887z'/%3E%3C/g%3E%3Cpath fill='url(%23paint1_linear)' fill-rule='evenodd' d='M2.396 21.536C4.648 8.418 13.797 2.497 30.887 2.497h108.435c17.09 0 26.24 5.92 28.491 19.04C164.612 9.799 155.566 3.68 139.321 3.68H30.887C14.643 3.68 5.597 9.8 2.396 21.536zm-.112 296.661c2.046 13.599 11.214 19.723 28.603 19.723h108.435c17.043 0 26.664-6.802 28.657-20.443-3.13 12.158-12.531 18.997-28.658 18.997H30.887c-16.437 0-25.504-6.265-28.603-18.277z' clip-rule='evenodd'/%3E%3Cpath fill='url(%23paint2_linear)' fill-rule='evenodd' d='M2.396 21.536C4.648 8.418 13.797 2.497 30.887 2.497h108.435c17.09 0 26.24 5.92 28.491 19.04C164.612 9.799 155.566 3.68 139.321 3.68H30.887C14.643 3.68 5.597 9.8 2.396 21.536zm-.112 296.661c2.046 13.599 11.214 19.723 28.603 19.723h108.435c17.043 0 26.664-6.802 28.657-20.443-3.13 12.158-12.531 18.997-28.658 18.997H30.887c-16.437 0-25.504-6.265-28.603-18.277z' clip-rule='evenodd'/%3E%3Cpath fill='url(%23paint3_linear)' fill-rule='evenodd' d='M30.887 3.68h108.434c20.845 0 29.836 10.075 29.836 29.168v274.459c0 18.45-9.648 29.167-29.836 29.167H30.887c-20.844 0-29.835-10.075-29.835-29.167V32.847c0-19.092 8.99-29.167 29.835-29.167z' clip-rule='evenodd'/%3E%3Cpath fill='url(%23paint4_linear)' fill-rule='evenodd' d='M30.887 3.68h108.434c20.845 0 29.836 10.075 29.836 29.168v274.459c0 18.45-9.648 29.167-29.836 29.167H30.887c-20.844 0-29.835-10.075-29.835-29.167V32.847c0-19.092 8.99-29.167 29.835-29.167z' clip-rule='evenodd'/%3E%3Cpath fill='url(%23paint5_linear)' stroke='%23000' stroke-width='.394' d='M3.746 29.836c0-9.366 2.117-16.14 6.543-20.574 4.425-4.434 11.198-6.568 20.598-6.568h108.434c9.4 0 16.173 2.134 20.599 6.568 4.426 4.435 6.543 11.208 6.543 20.574v280.746c0 9.029-2.277 15.805-6.788 20.325-4.51 4.52-11.286 6.816-20.354 6.816H30.887c-9.4 0-16.173-2.134-20.599-6.568-4.425-4.435-6.542-11.208-6.542-20.573V29.836z'/%3E%3Cpath fill='url(%23paint6_linear)' fill-rule='evenodd' d='M30.887 4.074h108.434c17.881 0 25.63 7.765 25.63 25.63V310.45c0 17.207-8.405 25.63-25.63 25.63H30.887c-17.88 0-25.63-7.764-25.63-25.63V29.704c0-17.865 7.75-25.63 25.63-25.63z' clip-rule='evenodd'/%3E%3Cpath fill='url(%23paint7_radial)' fill-rule='evenodd' d='M30.887 4.074h108.434c17.881 0 25.63 7.765 25.63 25.63V310.45c0 17.207-8.405 25.63-25.63 25.63H30.887c-17.88 0-25.63-7.764-25.63-25.63V29.704c0-17.865 7.75-25.63 25.63-25.63z' clip-rule='evenodd'/%3E%3Cpath fill='%23000' d='M30.887 6.703c-16.422 0-23 6.582-23 23.001V310.45c0 16.42 6.578 23.001 23 23.001h108.435c15.765 0 23.001-7.239 23.001-23.001V29.704c0-16.42-6.579-23-23.001-23H30.887z'/%3E%3C/g%3E%3Cg filter='url(%23filter4_i)' clip-path='url(%23clip1)'%3E%3Cpath fill='%23343434' fill-rule='evenodd' d='M77.941 339.892H92.49c.87.007.785.525-.085.525h-14.47c-.87 0-.954-.518-.085-.525h.091z' clip-rule='evenodd'/%3E%3C/g%3E%3Cg clip-path='url(%23clip2)'%3E%3Cg filter='url(%23filter5_i)'%3E%3Cpath fill='%23fff' fill-opacity='.6' fill-rule='evenodd' d='M17.08 6.395C8.937 9.879 5.256 17.399 5.256 29.72v280.933c0 11.587 3.807 19.194 11.545 22.93 0-.416-8.653-6.167-8.653-21.615V28.38c0-16.296 8.93-21.985 8.93-21.985z' clip-rule='evenodd'/%3E%3C/g%3E%3Cg filter='url(%23filter6_i)'%3E%3Cpath fill='%23fff' fill-opacity='.6' fill-rule='evenodd' d='M153.129 6.395c8.141 3.484 11.822 11.004 11.822 23.325v280.933c0 11.587-3.807 19.194-11.546 22.93 0-.416 8.654-6.167 8.654-21.615V28.38c0-16.296-8.93-21.985-8.93-21.985z' clip-rule='evenodd'/%3E%3C/g%3E%3C/g%3E%3Cpath fill='%23000' opacity='.603' d='M1.052 32.596h2.892v2.366H1.052zM166.266 32.596h2.892v2.366h-2.892zM134.196 2.892V0h2.366v2.892zM33.648 340.417v-2.892h2.366v2.892zM1.052 305.456h2.892v2.366H1.052zM166.266 305.456h2.892v2.366h-2.892z'/%3E%3Cg clip-path='url(%23clip3)'%3E%3Cg filter='url(%23filter7_ii)'%3E%3Cpath fill='url(%23paint8_linear)' fill-rule='evenodd' d='M.918 46.002a.919.919 0 00-.918.92v11.304c0 .508.41.92.918.92h.524c0-.691.009-12.468 0-13.144H.918z' clip-rule='evenodd'/%3E%3C/g%3E%3Cg filter='url(%23filter8_ii)'%3E%3Cpath fill='url(%23paint9_linear)' fill-rule='evenodd' d='M.918 70.055c-.299.073-.657.261-.848.529a.754.754 0 00-.07.28v23.082c0 .054.044.325.07.391.155.38.424.471.848.69h.524c0-.69.009-24.296 0-24.972H.918z' clip-rule='evenodd'/%3E%3C/g%3E%3Cg filter='url(%23filter9_ii)'%3E%3Cpath fill='url(%23paint10_linear)' fill-rule='evenodd' d='M.918 101.205c-.299.074-.657.262-.848.529a.753.753 0 00-.07.279v23.083c0 .054.044.326.07.391.155.38.424.472.848.691h.524c0-.691.009-24.297 0-24.973H.918z' clip-rule='evenodd'/%3E%3C/g%3E%3Cg filter='url(%23filter10_ii)' fill-rule='evenodd' clip-rule='evenodd'%3E%3Cpath fill='url(%23paint11_linear)' d='M169.291 78.204c.299.073.656.262.847.529.04.055.071.229.071.28v37.803c0 .054-.044.325-.071.391-.154.379-.423.471-.847.69h-.524c0-.691-.009-39.017 0-39.693h.524z'/%3E%3Cpath fill='url(%23paint12_linear)' d='M169.291 78.204c.299.073.656.262.847.529.04.055.071.229.071.28v37.803c0 .054-.044.325-.071.391-.154.379-.423.471-.847.69h-.524c0-.691-.009-39.017 0-39.693h.524z'/%3E%3C/g%3E%3C/g%3E%3Cg clip-path='url(%23clip4)' opacity='.801'%3E%3Crect width='20.504' height='2.76' x='74.918' y='12.223' fill='%231D1C1C' rx='1.38'/%3E%3Cmask id='b' width='22' height='3' x='74' y='12' mask-type='alpha' maskUnits='userSpaceOnUse'%3E%3Crect width='20.504' height='2.76' x='74.918' y='12.223' fill='%23fff' rx='1.38'/%3E%3C/mask%3E%3Cg mask='url(%23b)' fill-rule='evenodd' clip-rule='evenodd'%3E%3Cpath fill='%23000' fill-opacity='.15' d='M74.918 12.223h20.504v.188H74.918v-.188zm0 .564h20.504v.188H74.918v-.188zm20.504.563H74.918v.188h20.504v-.188zm-20.504.563h20.504v.188H74.918v-.188zm20.504.564H74.918v.187h20.504v-.187z'/%3E%3Cpath fill='%23fff' fill-opacity='.03' d='M74.919 12.618h20.504v.188H74.919v-.188zm0 .563h20.503v.188H74.918v-.188zm20.503.563H74.918v.188h20.504v-.188zm-20.504.564h20.504v.188H74.918v-.188zm20.504.563H74.918v.188h20.504v-.188z'/%3E%3Cpath fill='%23000' fill-opacity='.15' d='M75.138 12.035h.22v3.192h-.22v-3.192zm.658 0h.22v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.22v3.193h-.22v-3.192zm.878 0h-.22v3.193h.22v-3.192zm.438 0h.22v3.193h-.22v-3.192zm.878 0h-.22v3.193h.22v-3.192zm.439 0h.219v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.22v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.44 0h.219v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.219v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.22v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.44 0h.218v3.193h-.219v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.438 0h.22v3.193h-.22v-3.192zm.878 0h-.22v3.193h.22v-3.192zm.439 0h.219v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.22v3.193h-.22v-3.192zm.877 0h-.219v3.193h.22v-3.192zm.44 0h.219v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.219v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.22v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192z'/%3E%3Cpath fill='%23fff' fill-opacity='.03' d='M74.743 12.035h.22v3.192h-.22v-3.192zm.658 0h.22v3.193h-.22v-3.192zm.878 0h-.22v3.193h.22v-3.192zm.439 0h.22v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.22v3.193h-.22v-3.192zm.877 0h-.219v3.193h.22v-3.192zm.44 0h.219v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.219v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.22v3.193h-.22v-3.192zm.877 0h-.219v3.193h.22v-3.192zm.44 0h.219v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.438 0h.22v3.193h-.22v-3.192zm.878 0h-.22v3.193h.22v-3.192zm.439 0h.22v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.22v3.193h-.22v-3.192zm.878 0h-.22v3.193h.22v-3.192zm.438 0h.22v3.193h-.22v-3.192zm.878 0h-.22v3.193h.22v-3.192zm.439 0h.219v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.439 0h.22v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.44 0h.219v3.193h-.22v-3.192zm.877 0h-.22v3.193h.22v-3.192zm.438 0h.22v3.193h-.22v-3.192zm.878 0h-.22v3.193h.22v-3.192z'/%3E%3C/g%3E%3Cg filter='url(%23filter11_iii)' opacity='.244'%3E%3Crect width='20.504' height='2.76' x='74.918' y='12.223' fill='%23000' fill-opacity='.01' rx='1.38'/%3E%3C/g%3E%3C/g%3E%3Cg clip-path='url(%23clip5)'%3E%3Cpath fill='url(%23paint13_radial)' fill-rule='evenodd' d='M103.177 16.035a2.497 2.497 0 100-4.994 2.497 2.497 0 000 4.994z' clip-rule='evenodd'/%3E%3Cg filter='url(%23filter12_dd)' opacity='.388'%3E%3Cpath fill='url(%23paint14_radial)' fill-rule='evenodd' d='M103.177 14.852a1.314 1.314 0 100-2.628 1.314 1.314 0 000 2.628z' clip-rule='evenodd'/%3E%3C/g%3E%3Cmask id='c' width='4' height='3' x='101' y='12' mask-type='alpha' maskUnits='userSpaceOnUse'%3E%3Cpath fill='%23fff' fill-rule='evenodd' d='M103.177 14.852a1.314 1.314 0 100-2.628 1.314 1.314 0 000 2.628z' clip-rule='evenodd'/%3E%3C/mask%3E%3Cg mask='url(%23c)'%3E%3Cg filter='url(%23filter13_f)'%3E%3Cpath fill='%233E89CC' fill-rule='evenodd' d='M102.359 13.184c.117-.467.451-.836.2-.899-.252-.063-.311-.06-.678.827-.368.887.053 1.256.304 1.319.251.062.058-.78.174-1.247z' clip-rule='evenodd'/%3E%3C/g%3E%3Cg filter='url(%23filter14_f)'%3E%3Cpath fill='%231C5894' fill-rule='evenodd' d='M104.228 14.195c.436 0 .789-.441.789-.986 0-.544-.353-.986-.789-.986-.435 0-.789.442-.789.986 0 .545.354.986.789.986z' clip-rule='evenodd'/%3E%3C/g%3E%3Cg filter='url(%23filter15_f)'%3E%3Cpath fill='%230A152B' fill-rule='evenodd' d='M103.664 15.288c.621-.178 1.03-.65.913-1.056-.116-.405-.713-.59-1.334-.411-.621.178-1.03.65-.914 1.056.116.405.714.589 1.335.41z' clip-rule='evenodd'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_d' width='159.694' height='16.646' x='5.258' y='332.663' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='.394'/%3E%3CfeGaussianBlur stdDeviation='2.957'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0'/%3E%3CfeBlend in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3Cfilter id='filter1_d' width='147.668' height='8.585' x='11.251' y='336.51' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='.394'/%3E%3CfeGaussianBlur stdDeviation='1.183'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0'/%3E%3CfeBlend in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3Cfilter id='filter2_d' width='136.233' height='5.081' x='17.087' y='338.032' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='.394'/%3E%3CfeGaussianBlur stdDeviation='.789'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.24 0'/%3E%3CfeBlend in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3Cfilter id='filter3_i' width='166.529' height='338.84' x='1.84' y='.789' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset/%3E%3CfeGaussianBlur stdDeviation='.526'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0'/%3E%3CfeBlend in2='shape' result='effect1_innerShadow'/%3E%3C/filter%3E%3Cfilter id='filter4_i' width='15.862' height='.657' x='77.239' y='339.892' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='.131'/%3E%3CfeGaussianBlur stdDeviation='.131'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0.592157 0 0 0 0 0.592157 0 0 0 0 0.592157 0 0 0 1 0'/%3E%3CfeBlend in2='shape' result='effect1_innerShadow'/%3E%3C/filter%3E%3Cfilter id='filter5_i' width='13.268' height='327.188' x='5.257' y='6.395' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dx='1.446'/%3E%3CfeGaussianBlur stdDeviation='1.117'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0'/%3E%3CfeBlend in2='shape' result='effect1_innerShadow'/%3E%3C/filter%3E%3Cfilter id='filter6_i' width='13.268' height='327.188' x='153.129' y='6.395' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dx='1.446'/%3E%3CfeGaussianBlur stdDeviation='1.117'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0'/%3E%3CfeBlend in2='shape' result='effect1_innerShadow'/%3E%3C/filter%3E%3Cfilter id='filter7_ii' width='1.446' height='13.932' x='0' y='45.608' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='.789'/%3E%3CfeGaussianBlur stdDeviation='.197'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.757614 0'/%3E%3CfeBlend in2='shape' result='effect1_innerShadow'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='-.789'/%3E%3CfeGaussianBlur stdDeviation='.197'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.757614 0'/%3E%3CfeBlend in2='effect1_innerShadow' result='effect2_innerShadow'/%3E%3C/filter%3E%3Cfilter id='filter8_ii' width='1.446' height='25.761' x='0' y='69.661' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='.789'/%3E%3CfeGaussianBlur stdDeviation='.197'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.757614 0'/%3E%3CfeBlend in2='shape' result='effect1_innerShadow'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='-.789'/%3E%3CfeGaussianBlur stdDeviation='.197'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.757614 0'/%3E%3CfeBlend in2='effect1_innerShadow' result='effect2_innerShadow'/%3E%3C/filter%3E%3Cfilter id='filter9_ii' width='1.446' height='25.761' x='0' y='100.811' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='.789'/%3E%3CfeGaussianBlur stdDeviation='.197'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.757614 0'/%3E%3CfeBlend in2='shape' result='effect1_innerShadow'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='-.789'/%3E%3CfeGaussianBlur stdDeviation='.197'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.757614 0'/%3E%3CfeBlend in2='effect1_innerShadow' result='effect2_innerShadow'/%3E%3C/filter%3E%3Cfilter id='filter10_ii' width='1.446' height='40.482' x='168.763' y='77.81' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='.789'/%3E%3CfeGaussianBlur stdDeviation='.197'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.757614 0'/%3E%3CfeBlend in2='shape' result='effect1_innerShadow'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='-.789'/%3E%3CfeGaussianBlur stdDeviation='.197'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.757614 0'/%3E%3CfeBlend in2='effect1_innerShadow' result='effect2_innerShadow'/%3E%3C/filter%3E%3Cfilter id='filter11_iii' width='20.504' height='2.76' x='74.918' y='12.223' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset/%3E%3CfeGaussianBlur stdDeviation='.263'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.795035 0'/%3E%3CfeBlend in2='shape' result='effect1_innerShadow'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='-.526'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.80013 0'/%3E%3CfeBlend in2='effect1_innerShadow' result='effect2_innerShadow'/%3E%3CfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='-.263'/%3E%3CfeComposite in2='hardAlpha' k2='-1' k3='1' operator='arithmetic'/%3E%3CfeColorMatrix values='0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.197067 0'/%3E%3CfeBlend in2='effect2_innerShadow' result='effect3_innerShadow'/%3E%3C/filter%3E%3Cfilter id='filter12_dd' width='3.943' height='3.943' x='101.205' y='11.566' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset/%3E%3CfeGaussianBlur stdDeviation='.329'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0'/%3E%3CfeBlend in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeColorMatrix in='SourceAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0'/%3E%3CfeBlend in2='effect1_dropShadow' result='effect2_dropShadow'/%3E%3CfeBlend in='SourceGraphic' in2='effect2_dropShadow' result='shape'/%3E%3C/filter%3E%3Cfilter id='filter13_f' width='2.343' height='3.601' x='101.022' y='11.547' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur result='effect1_foregroundBlur' stdDeviation='.357'/%3E%3C/filter%3E%3Cfilter id='filter14_f' width='3.006' height='3.401' x='102.725' y='11.509' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur result='effect1_foregroundBlur' stdDeviation='.357'/%3E%3C/filter%3E%3Cfilter id='filter15_f' width='3.361' height='2.676' x='101.773' y='13.216' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur result='effect1_foregroundBlur' stdDeviation='.268'/%3E%3C/filter%3E%3ClinearGradient id='paint0_linear' x1='1.84' x2='1.84' y1='.789' y2='339.629' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%23C9C6C8'/%3E%3Cstop offset='.017' stop-color='%23716D6D'/%3E%3Cstop offset='.078' stop-color='%23C9C6C8'/%3E%3Cstop offset='.921' stop-color='%23C9C6C8'/%3E%3Cstop offset='.98' stop-color='%23716D6D'/%3E%3Cstop offset='1' stop-color='%23C9C6C8'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint1_linear' x1='79.826' x2='79.826' y1='2.497' y2='23.976' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-opacity='.901'/%3E%3Cstop offset='1' stop-opacity='.01'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint2_linear' x1='90.988' x2='90.988' y1='337.92' y2='314.21' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-opacity='.9'/%3E%3Cstop offset='1' stop-opacity='.01'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint3_linear' x1='79.722' x2='79.722' y1='3.68' y2='24.99' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-opacity='.5'/%3E%3Cstop offset='1' stop-opacity='.01'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint4_linear' x1='91.046' x2='91.046' y1='336.474' y2='312.95' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-opacity='.5'/%3E%3Cstop offset='1' stop-opacity='.01'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint5_linear' x1='3.549' x2='3.549' y1='2.497' y2='337.92' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%235F5F5F'/%3E%3Cstop offset='.01' stop-color='%23222'/%3E%3Cstop offset='1' stop-color='%23252525'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint6_linear' x1='5.257' x2='5.257' y1='4.074' y2='336.08' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%236D6D6D'/%3E%3Cstop offset='.016'/%3E%3Cstop offset='.985'/%3E%3Cstop offset='1' stop-color='%235C5C5C'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint8_linear' x1='.393' x2='.79' y1='53.721' y2='53.721' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%23A5A5A5'/%3E%3Cstop offset='.007' stop-color='%23E2E2E2'/%3E%3Cstop offset='.995' stop-color='%23BEBEBE'/%3E%3Cstop offset='1' stop-color='%239D9D9D'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint9_linear' x1='.393' x2='.79' y1='84.721' y2='84.721' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%23A5A5A5'/%3E%3Cstop offset='.007' stop-color='%23E2E2E2'/%3E%3Cstop offset='.995' stop-color='%23BEBEBE'/%3E%3Cstop offset='1' stop-color='%239D9D9D'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint10_linear' x1='.393' x2='.79' y1='115.871' y2='115.871' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%23A5A5A5'/%3E%3Cstop offset='.007' stop-color='%23E2E2E2'/%3E%3Cstop offset='.995' stop-color='%23BEBEBE'/%3E%3Cstop offset='1' stop-color='%239D9D9D'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint11_linear' x1='169.709' x2='169.687' y1='96.366' y2='96.366' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%238E8E8E'/%3E%3Cstop offset='1' stop-color='%23BCBCBC'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint12_linear' x1='170.209' x2='170.209' y1='78.204' y2='117.897' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-opacity='.997'/%3E%3Cstop offset='.095' stop-opacity='.01'/%3E%3Cstop offset='.895' stop-opacity='.01'/%3E%3Cstop offset='1' stop-opacity='.881'/%3E%3C/linearGradient%3E%3CclipPath id='clip0'%3E%3Cpath fill='%23fff' transform='translate(1.052)' d='M0 0h168.106v340.417H0z'/%3E%3C/clipPath%3E%3CclipPath id='clip1'%3E%3Cpath fill='%23fff' transform='translate(75.313 339.892)' d='M0 0h19.715v.526H0z'/%3E%3C/clipPath%3E%3CclipPath id='clip2'%3E%3Cpath fill='%23fff' transform='translate(5.257 6.309)' d='M0 0h159.694v327.274H0z'/%3E%3C/clipPath%3E%3CclipPath id='clip3'%3E%3Cpath fill='%23fff' transform='translate(0 46.002)' d='M0 0h170.209v80.175H0z'/%3E%3C/clipPath%3E%3CclipPath id='clip4'%3E%3Cpath fill='%23fff' transform='translate(74.918 12.223)' d='M0 0h20.504v2.76H0z'/%3E%3C/clipPath%3E%3CclipPath id='clip5'%3E%3Cpath fill='%23fff' transform='translate(100.679 11.04)' d='M0 0h4.995v4.995H0z'/%3E%3C/clipPath%3E%3CradialGradient id='paint7_radial' cx='0' cy='0' r='1' gradientTransform='matrix(0 96.1371 -33.7584 0 81.348 332.736)' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%23fff' stop-opacity='.151'/%3E%3Cstop offset='1' stop-color='%23fff' stop-opacity='.01'/%3E%3C/radialGradient%3E%3CradialGradient id='paint13_radial' cx='0' cy='0' r='1' gradientTransform='rotate(45.194 32.052 137.086) scale(5.02757)' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%23434343'/%3E%3Cstop offset='1' stop-color='%23121212'/%3E%3C/radialGradient%3E%3CradialGradient id='paint14_radial' cx='0' cy='0' r='1' gradientTransform='rotate(90 45.477 57.7) scale(2.62871)' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%232A4893'/%3E%3Cstop offset='1' stop-color='%23213054'/%3E%3C/radialGradient%3E%3C/defs%3E%3C/svg%3E"></Image>
        <Box
          position="absolute"
          overflow={"hidden"}
          bottom={"20px"}
          left={0}
          right={0}
          m={"auto"}
          w={"88%"}
          height={isMobile ? "100%" : currentSnapPoint}
          color={"black"}
          bg={"white"}
          boxShadow="lg"
          borderTopLeftRadius="xl"
          borderTopRightRadius="xl"
          borderRadius={"30px 30px 50px 50px"}
          transition="height 0.3s ease-in-out"
          style={{
            transform: `translateY(-${scrollY}px)`,
            transition: "transform 0.3s ease-in-out",
          }}
          maxHeight="calc(100% - 64px)"
          overflowY="auto"
          onTouchStart={(e) => handleDragStart(e, "top")} 
          onTouchEnd={handleDragEnd}
          onMouseDown={(e) => handleDragStart(e, "top")} 
          onMouseUp={handleDragEnd}
          
        >
          <HStack px="10px" mt={4} spacing={4} justifyContent={"space-evenly"}>
            <Button
              colorScheme="blue"
              onClick={() => handleSnapPointChange(100)}
            >
              Bottom
            </Button>
            <Button
              colorScheme="green"
              onClick={() => handleSnapPointChange(300)}
            >
              Middle
            </Button>
            <Button
              colorScheme="purple"
              onClick={() => handleSnapPointChange(700)}
            >
              Top
            </Button>
          </HStack>
          <Button colorScheme="teal" onClick={toggleDrag} mt={"5px"}>
            {isDragEnabled ? "Disable Drag" : "Enable Drag"}
          </Button>
          <div style={{ height: `${scrollY}px` }}></div>{" "}
          <Box p="10px">
            <Text textAlign={"left"} fontWeight={"bold"}>
              The snap points api lets you control exactly what positions the
              sheet can be in. If the user drag the sheet out of bounds you'll
              get a rubber band effect, and it gently slides into position on
              release. You can even flick it from top to bottom with some speed,
              if that's your jam. By default the sheet will try to use enough
              height to avoid a scrolling overflow. And finally, it shows how
              the sheet behaves when you don't provide the onDismiss callback,
              note how you can't close it The snap points api lets you control
              exactly what positions the sheet can be in. If the user drag the
              sheet out of bounds you'll get a rubber band effect, and it gently
              slides into position on release. You can even flick it from top to
              bottom with some speed, if that's your jam. you don't provide the
              onDismiss callback, note how you can't close it
            </Text>
          </Box>
          <Button colorScheme="teal" onClick={handleArrowButtonClick}>
            <Icon as={ChevronUpIcon} boxSize={4} />
          </Button>
        </Box>
      </Box>
    </>
  );
};

export default BottomSheet;
